Проблемы
--

* Как выгружать из базы списки для M2M связей
* * У нас по факту есть еще одна таблица, это костыль реляционных баз, такого может не быть в других хранилищах
        => выше репозитория это не должно подниматься
* * ~~Если сделать доп метод в репозитории, который возвращает список id зависимых объектов~~
* * * ~~В какой репозиторий его помещать?~~
* * * * ~~В оба, по мере необходимости~~
* * * ~~Как быть, если у других хранилищ нет проблемы с M2M, но придется соблюдать сигнатуру будто бы есть М2М~~
* * * * ~~Отклоняем вариант для отдельного метода в репозитории~~
* * Если в dto bp из базы класть список id для m2m?
* * * Если у хранилища нет проблемы с M2M
* * * * Так даже проще, не будет доп запросов, и можно просто выдрать список m2m полей
* * * Пока не понятны слабые стороны, принимаем решение класть в DTO список зависимых сущностей


* Беда с производительностью, нужны ленивые загрузки
* Беда с производительностью, очень много запросов в базу при сложных агрегатах, как выгребать все за один запрос
* На каком уровне манипулировать разныме хранилищами, например кешом и базой
* * Репозитории точно не должны знать друг о друге
* Обработку QueryParamComparison нужно как-то унифицировать, а то слишком много if получается
* Есть базовый класс пользователя, от него наследуется менеджер, не городить же под менеджер свой dal если он полностью эквивалентен пользовательскому
* Где собирать энитю, если для нее нужно несколько репозиториев
* * В uow?
* * * В разных uow будет задвоение кода
* * Ввести новую сущность билдера?
* * * Возможно, но тогда какие у нее области ответственности?
* * * * Может стоит сделать некий базовый билдер, который на входе принимает репозиторий, возвращает энтитю, такой себе снипет?
* * * * * ...
* Фильтрация по полю foreign key модели, как?
* В UOW я начал вызывать методы модели, чего я делать не хотел


Нейминги:
Dal:
<Сущность><Хранилище>Repository - Название класса репозитрия
<Сущность>DalDto - DTO из хранилища
<Сущность>UiDto - DTO с пользовательским вводом
<Сущность>UoDto - DTO с пользовательским выводом
